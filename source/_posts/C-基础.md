title: C++基础-const
author: Lehanbal
tags:
  - C++
categories:
  - C++
  - 基础
date: 2022-03-22 22:05:00
---
## const含义

常类型指使用类型修饰符const说明的类型，常类型的变量或对象的值是不能被更新的。

### const作用

1. 定义常量
2. 类型检查
3. 防止修改，有保护作用，健壮性
4. 节省空间，不会多拷贝。

**const与#define宏定义产量的区别**

const常量具有类型，编译器可以进行安全检查；#define宏定义 ~~没有数据类型~~ 同样具备数据类型，具体的类型和各种字面量（整数、浮点、用户定义等）和运算符的结果类型有关。

但是const仍有类型检查的作用

### const对象默认为文件局部变量

要使const变量能够在其他文件中访问，必须在文件中显式地指定它为extern。

### 指针与const

```c++
const char * a;//指向const对象的指针，指针可改，内容不可改
char const * a;//同上
char * const a;//指向类型对象的指针。常指针，指针不可修改，内容可改
const char * const a;//指向const对象的const指针，指针、内容均不可改
```

小结：如果*const*位于`*`的左侧，则const就是用来修饰指针所指向的变量，即指针指向为常量；如果const位于`*`的右侧，*const*就是修饰指针本身，即指针本身是常量。

对于指向常量的指针，不能通过指针来修改对象的值。
也不能使用void`*`指针保存const对象的地址，必须使用const void`*`类型的指针保存const对象的地址。
允许把非const对象的地址赋值给const对象的指针，如果要修改指针所指向的对象值，必须通过其他方式修改，不能直接通过当前指针直接修改。