title: 搭建博客简录
author: Lehanbal
tags:
  - Blog
categories:
  - Blog
top: true
date: 2021-05-24 16:38:00
---
博客环境经常变更，所以记录一下搭建博客的步骤。

## 环境准备

1. node.js

2. npm

3. git

## 配置SSH key

**记得保存这个SSH key，除非你想每次变更一次环境就重新配置一次**

### 丢失SSH key的情况

去github上将原先的ssh删除，不删除也没关系，便于管理还是删除比较好。

![image-20210524161616891](https://gitee.com/lehanbal/blog-image/raw/master/img/20210524161616.png)

打开git控制台

![image-20210524161704199](https://gitee.com/lehanbal/blog-image/raw/master/img/20210524161704.png)

> cd ~/.ssh

到.ssh目录下，若存在文件则说明ssh存在，没有的话就是ssh没了，

使用命令

> ssh-keygen -t rsa -C “xxxxx@xxx.com”

根据提示重新申请ssh

### 未丢失SSH key的情况

拥有ssh之后，在之前的github界面点击"New SSH key"去添加ssh即可。

![image-20210524162302393](https://gitee.com/lehanbal/blog-image/raw/master/img/20210524162302.png)

添加ssh之后，在Git控制台，通过命令

>  ssh -T git@github.com

测试是否成功配置ssh

出现以下内容说明成功

![image-20210524162420949](https://gitee.com/lehanbal/blog-image/raw/master/img/20210524162421.png)

之后通过

> git config --global user.name "xxxxx"// 你的github用户名，非昵称 
>
> git config --global user.email  "xxx@xxx.com"// 填写你的github注册邮箱

填写相关信息

## 图床搭建

我使用的是picgo+Gitee作为图床

首先创建一个gitee账号，然后建个仓库，如下：

![image-20210524154315781](https://gitee.com/lehanbal/blog-image/raw/master/img/image-20210524154315781.png)

之后

![image-20210524161358496](https://gitee.com/lehanbal/blog-image/raw/master/img/20210524161358.png)

gitee中的设置去申请私人令牌，这个令牌就是下文的token令牌，申请到后请妥善保存，不然下次依旧得继续申请。

之后[下载Picgo](https://github.com/Molunerfinn/PicGo/releases)

安装好后打开插件设置去安装gitee-uploader插件

![image-20210524161033098](https://gitee.com/lehanbal/blog-image/raw/master/img/20210524161033.png)

安装好后设置gitee图床

![image-20210524161257370](https://gitee.com/lehanbal/blog-image/raw/master/img/20210524161257.png)

到这图床就设置完毕

## 写文章

可以使用hexo的一些写文章的命令来操作，但是使用插件更方便点，安装hexo-admin

> npm install hexo-admin --save

之后在控制台输入hexo server -d运行服务器

进入 http://localhost:4000/admin 就能够进行文章管理

### 创建文章

不想使用插件的时候，可以通过

> hexo new "文章名称"

文章会被创建到

> hexo/source/_posts

目录下

也可以通过

> hexo new draft "new draft"

来创建一个草稿。

通过

> hexo server --drafts

浏览草稿。

通过

> hexo publish [layout] <filename>

将草稿变成文章。

### 文章属性

在md文件头部写上进行如下内容：

```bash
---
title: #标题
date: 2017-12-02 21:01:24 #时间
toc: true #是否显示文章目录
categories: 
tags:   #标签
	- #标签1
	- #标签2
---
```

还有其他的属性如下：

| Setting    | Description  | Default        |
| ---------- | ------------ | -------------- |
| layout     | Layout       | post或page     |
| title      | 文章的标题   |                |
| date       | 创建日期     | 文件的创建日期 |
| updated    | 修改日期     | 文件的修改日期 |
| comments   | 是否开启评论 | true           |
| tags       | 标签         |                |
| categories | 分类         |                |
| permalink  | url中的名字  | 文件名         |

## hexo命令

### hexo环境

```bash
npm install hexo -g #安装  
npm update hexo -g #升级  
hexo init #初始化
```

### 服务器

```bash
hexo server #Hexo 会监视文件变动并自动更新，您无须重启服务器。
hexo server -s #静态模式
hexo server -p 5000 #更改端口
hexo server -i 192.168.1.1 #自定义 IP

hexo clean #清除缓存 网页正常情况下可以忽略此条命令
hexo g #生成静态网页
hexo d #开始部署
```

### 监视文件变动

```bash
hexo generate #使用 Hexo 生成静态文件快速而且简单
hexo generate --watch #监视文件变动
```

### 完成后部署

```bash
hexo deploy -g
hexo server -g
```