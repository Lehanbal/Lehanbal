---
title: 数据库必杀题
date: 2020-10-30 10:34:33
tags:
- 数据库
categories:
- 数据库
---

## 什么是存储过程？用什么来调用？

存储过程是一个预编译的SQL语句，优点是允许模块化的设计，一次创建到处使用。

1. 可以使用命令对象来调用存储过程
2. 可以供外部程序调用。

## 存储过程的优缺点

缺点：移植性差

优点：

1. 存储过程是预编译过的，执行效率高。
2. 存储过程的代码直接放于数据库中，存储过程中直接调用的是存储过程名，减少了网络通讯。
3. 安全性高，执行存储过程需要一定权限的用户，并且可以防止sql注入。
4. 存储过程可以反复使用，减少数据库开发人员的工作量。

## 索引的作用？它的优缺点是什么？

索引是一种特殊的查询表，数据库的搜索可以利用它加速对数据的检索。在底层是使用B+树实现的数据存储，实现了想是目录一样的功能，使得查询某一条数据的时候并不需要遍历整张表来查找数据。索引可以是唯一的，创建索引允许指定单个列或是多个列。缺点是减慢了数据录入的速度，每次数据进行增删的时候，都需要重新构建索引。

## 视图与表的区别

视图是一条查询语句的结果集，不能够增增删改，只能够查询数据，是一张虚表。而表则是数据库中存储实际数据而基本构成。

## 视图的优缺点

优点：

1. 对数据库的访问很快，因为视图可以有选择性的选取数据库的一部分数据。
2. 可以简化查询的复杂度，通过复杂查询出结果后，使用视图便可以简单的查询该结果集的内容。
3. 维护数据的独立性，视图可以从多个表检索数据。

缺点：查询视图的时候，必须把视图的查询转化成为基本表的查询，如果这个视图是有一个复杂的多表查询所定义，效率会低。

## 数据库查询语句很慢，如何优化？

1. 建立索引。
2. 减少表之间的关联。
3. 优化sql，尽量让sql能够快速定位，不要使用全表查询，数据量大的表应该排在前面。
4. 讲话查询字段，尽量少返回数据。

## 什么是事务，事务的特性是什么？

事务：是一系列的数据库操作，是数据库应用的基本逻辑单位。

事务性质：

- 原子性。既不可分割性，事务要么全部执行，要么都不执行。
- 一致性。事务的执行使得数据库从一种正确状态转移到另一种正确的状态。
- 隔离性。在事务正常提交之前，不允许把该事务对数据的任何改变提供给其他事务。
- 持久性。事务正确提交之后，其结果将永久保存在数据库中。

## 内连接和外连接的区别

内连接是保证两个表中所有行都要满足连接条件。

外连接则是不满足条件的列也会显示出来，只限制其中一个表的行，而不限制连一个表的行。分左连接、右链接和全连接（笛卡尔积）三种。

## 什么是游标？

游标是对查询出来的结果集做一个单元的有效处理。游标可以定在该单元的特定行，从结果集的当前行检索一行或多行。可以对结果集当前行做修改。一般不使用游标，但是需要逐条处理数据的时候，游标就有了用武之地。

## 使用索引一定能提高查询速率吗？为什么？

通常来说，使用索引查询数据比全表扫描要快。

索引需要空间来存储，也需要定期维护，每次有数据增删改的时候，都需要重新建立索引，增加系统性能占用，因为索引需要额外的存储空间和处理，那些不必要的索引反而会使查询时间变慢。

## 简单说一说drop、delete与truncate的区别

这三个都是表示删除。

delete和truncate只删除表的数据不删除表的结构。

速度来说 drop > truncate > delete

delete是dml语句，这个操作会放到rollback segement中，事务被提交后才会生效，如果有trigger的话，会触发。truncate,drop是ddl， 操作立即生效，原数据不放到rollback segment中，不能回滚。操作不触发trigger。

当我们删除一张表的时候，使用drop。

当我们要清空一张表的时候，使用truncate，（本质上是将表结构保留下来然后drop，在生成一张新的表）

当我们要删除某一条数据的时候，使用delete并且带上where条件。