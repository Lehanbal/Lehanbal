---
title: JVM内存模型
date: 2020-11-03 17:42:17
tags:
- JVM
- JAVA
categories:
- JAVA
---

推荐视频：[【java】jvm内存模型全面解析](https://www.bilibili.com/video/BV12t411u726)

## 区域划分

JVM内存模型分为5个区：

1. Java虚拟机栈
2. 本地方法栈
3. 程序计数器
4. 堆
5. 方法区（元空间）

![image-20201103174600198](https://gitee.com/lehanbal/blog-image/raw/master/img/image-20201103174600198.png)

## 各区域的作用

1. Java虚拟机栈:

   用于存储变量表、操作数栈、动态链接和方法出口等信息。（栈内存储的引用信息是地址，实际指向的是堆里面的对象）

2. 本地方法栈：

   用于管理本地方法的调用，由native修饰，调用C和C++的相关内容。

3. 程序计数器：

   它是一块很小的内存空间，主要记录各个线程执行的字节码地址，例如分支、循环、线程恢复都依赖于计数器。

4. 堆：

   Java虚拟机中内存最大的一块，被所有线程共享，几乎所有对象实例都会在堆里面分配内存，堆当中还有常量池，用于存储堆当中的常量。

5. 方法区（元空间）：

   用于存放已经被虚拟机加载的类信息、常量和**静态变量**等数据。（静态的内容存放的地方）

## 线程私有与公有

- 私有：每个线程在开辟、运行的过程中都会单独创建这样的一份内存。java虚拟机栈、本地方法栈、程序计数器。
- 公有：线程全局共享。堆和方法区。

## 关于垃圾回收

栈在方法运行完毕后会被清空，但是堆上的内容不会被清空，所以就引出了GC回收，不能马上删除，因为不清楚是否还有其他对象的指向引用。